<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <meta name="theme-color" content="#0d1321">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <title>Sky Dash</title>
  <style>
    html, body { margin:0; padding:0; height:100%; background:#0d1321; touch-action:none; }
    #ui { position:fixed; top:0; left:0; right:0; display:flex; justify-content:space-between;
          color:#fff; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; padding:8px 12px; }
    #btns { position: fixed; bottom: 0; left: 0; right: 0; display:flex; }
    .btn { flex:1; height: 28vh; background: rgba(255,255,255,0.06); border: 0; }
    .btn:active { background: rgba(255,255,255,0.12); }
    #install { position:fixed; right:12px; bottom:12px; padding:10px 14px; border:0; border-radius:10px;
               background:#2a6f97; color:#fff; display:none; }
    canvas { display:block; width:100vw; height:72vh; }
  </style>
</head>
<body>
  <div id="ui"><div id="score">Score: 0</div><div id="best">Best: 0</div></div>
  <canvas id="game" width="480" height="720"></canvas>
  <div id="btns">
    <button class="btn" id="left" aria-label="Gauche"></button>
    <button class="btn" id="right" aria-label="Droite"></button>
  </div>
  <button id="install">Installer</button>
  <script src="main.js"></script>
  <script>
  // PWA install prompt
  let deferredPrompt;
  const installBtn = document.getElementById('install');
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = 'block';
  });
  installBtn.addEventListener('click', async () => {
    installBtn.style.display = 'none';
    if (deferredPrompt){ deferredPrompt.prompt(); await deferredPrompt.userChoice; deferredPrompt = null; }
  });
  // Register service worker
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js');
    });
  }
  </script>
</body>
</html>
